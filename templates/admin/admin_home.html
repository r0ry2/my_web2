{% extends "admin/admin_base.html" %}
{% block title %}Admin Home | Crochet Rory Store{% endblock %}

{% block content %}

{% if new_messages > 0 %}
  <a href="{{ url_for('admin_messages') }}" 
     style="
       position: absolute;
       top: 30px;
       right: 50px;
       background: linear-gradient(90deg, #ff4d88, #ff7fab);
       color: white;
       font-weight: bold;
       padding: 10px 18px;
       border-radius: 30px;
       box-shadow: 0 2px 6px rgba(0,0,0,0.25);
       animation: pulse 1.5s infinite;
       text-decoration: none;
       z-index: 1000;
       transition: 0.3s;
     "
     onmouseover="this.style.transform='scale(1.1)'"
     onmouseout="this.style.transform='scale(1)'">
    ğŸ’Œ {{ new_messages }} New Message{{ 's' if new_messages > 1 else '' }}
  </a>

  <style>
    @keyframes pulse {
      0% { transform: scale(1); opacity: 1; }
      50% { transform: scale(1.1); opacity: 0.9; }
      100% { transform: scale(1); opacity: 1; }
    }
  </style>
{% endif %}

<div style="max-width:1200px; margin:40px auto; padding:30px; background:#fff0f6; border-radius:20px; box-shadow:0 4px 20px rgba(0,0,0,0.1);">

  <!-- Header -->
<!-- Header -->
<div style="text-align:center; margin-bottom:40px;">
  <h1 style="color:#e26fa7;">ğŸŒ¸ Admin Home</h1>
  <p style="color:#555;">Welcome back, <b>Admin</b> ğŸ’• | Manage your store below</p>
</div>


  <!-- Stats Section -->
  <div style="display:grid; grid-template-columns:repeat(auto-fit, minmax(250px, 1fr)); gap:20px; margin-bottom:40px;">
    <div style="background:white; padding:25px; border-radius:15px; text-align:center; box-shadow:0 3px 8px rgba(0,0,0,0.05);">
      <div style="font-size:35px;">ğŸ§¶</div>
      <h2 style="color:#e26fa7;">{{ product_count }}</h2>
      <p style="color:#777;">Products</p>
    </div>

    <div style="background:white; padding:25px; border-radius:15px; text-align:center; box-shadow:0 3px 8px rgba(0,0,0,0.05);">
      <div style="font-size:35px;">ğŸ“¦</div>
      <h2 style="color:#e26fa7;">{{ order_count }}</h2>
      <p style="color:#777;">Orders</p>
    </div>

    <div style="background:white; padding:25px; border-radius:15px; text-align:center; box-shadow:0 3px 8px rgba(0,0,0,0.05);">
      <div style="font-size:35px;">ğŸ‘¥</div>
      <h2 style="color:#e26fa7;">{{ user_count }}</h2>
      <p style="color:#777;">Users</p>
    </div>
  </div>

  <!-- Actions -->
  <div style="text-align:center; margin-bottom:40px;">
    <a href="{{ url_for('add_product') }}" 
       style="background:#e26fa7; color:white; padding:12px 25px; border-radius:30px; text-decoration:none; margin:10px; display:inline-block; transition:0.3s;">
       â• Add Product
    </a>

    <a href="{{ url_for('admin_users') }}" 
       style="background:#c67ace; color:white; padding:12px 25px; border-radius:30px; text-decoration:none; margin:10px; display:inline-block; transition:0.3s;">
       ğŸ‘¥ Manage Users
    </a>

    <a href="{{ url_for('add_product') }}" 
       style="background:#ffb6c1; color:white; padding:12px 25px; border-radius:30px; text-decoration:none; margin:10px; display:inline-block; transition:0.3s;">
       ğŸ›ï¸ Manage Products
    </a>

    <a href="{{ url_for('admin_dashboard') }}" 
       style="background:#f7a8c0; color:white; padding:12px 25px; border-radius:30px; text-decoration:none; margin:10px; display:inline-block; transition:0.3s;">
       ğŸ“Š View Dashboard
    </a>

    <a href="{{ url_for('logout') }}" 
       style="background:#f28b82; color:white; padding:12px 25px; border-radius:30px; text-decoration:none; margin:10px; display:inline-block; transition:0.3s;">
       ğŸšª Logout
    </a>
  </div>


  <!-- Recent Orders -->
  <h2 style="color:#e26fa7; text-align:center; margin-bottom:20px;">ğŸ§¾ Recent Orders</h2>
  <div style="overflow-x:auto;">
    <table style="width:100%; border-collapse:collapse; background:white; border-radius:15px; overflow:hidden;">
      <thead style="background:#ffe3ec; color:#e26fa7;">
        <tr>
          <th style="padding:12px;">ID</th>
          <th>Customer</th>
          <th>Total</th>
          <th>Date</th>
        </tr>
      </thead>
      <tbody>
        {% for order in orders %}
        <tr style="text-align:center; border-bottom:1px solid #f8d7e3;">
          <td style="padding:10px;">{{ order.id }}</td>
          <td>{{ order.customer_name }}</td>
          <td>{{ order.total }} TUB</td>
          <td>{{ order.date_created.strftime('%Y-%m-%d') if order.date_created else 'â€”' }}</td>
        </tr>
        {% else %}
        <tr><td colspan="4" style="text-align:center; padding:20px;">No orders yet ğŸ’Œ</td></tr>
        {% endfor %}
      </tbody>
    </table>
  </div>
</div>

{% endblock %}
