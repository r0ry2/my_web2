{% extends "base.html" %}
{% block title %}Admin Home | Crochet Rory Store{% endblock %}

{% block content %}
<div style="max-width:1200px; margin:40px auto; padding:30px; background:#fff0f6; border-radius:20px; box-shadow:0 4px 20px rgba(0,0,0,0.1);">

  <!-- Header -->
  <div style="text-align:center; margin-bottom:40px;">
    <h1 style="color:#e26fa7;">🌸 Admin Home</h1>
    <p style="color:#555;">Welcome back, <b>Admin</b> 💕 | Manage your store below</p>
  </div>

  <!-- Stats Section -->
  <div style="display:grid; grid-template-columns:repeat(auto-fit, minmax(250px, 1fr)); gap:20px; margin-bottom:40px;">
    <div style="background:white; padding:25px; border-radius:15px; text-align:center; box-shadow:0 3px 8px rgba(0,0,0,0.05);">
      <div style="font-size:35px;">🧶</div>
      <h2 style="color:#e26fa7;">{{ product_count }}</h2>
      <p style="color:#777;">Products</p>
    </div>

    <div style="background:white; padding:25px; border-radius:15px; text-align:center; box-shadow:0 3px 8px rgba(0,0,0,0.05);">
      <div style="font-size:35px;">📦</div>
      <h2 style="color:#e26fa7;">{{ order_count }}</h2>
      <p style="color:#777;">Orders</p>
    </div>

    <div style="background:white; padding:25px; border-radius:15px; text-align:center; box-shadow:0 3px 8px rgba(0,0,0,0.05);">
      <div style="font-size:35px;">👥</div>
      <h2 style="color:#e26fa7;">{{ user_count }}</h2>
      <p style="color:#777;">Users</p>
    </div>
  </div>

  <!-- Actions -->
  <div style="text-align:center; margin-bottom:40px;">
    <!-- Add Product -->
    <a href="{{ url_for('add_product') }}" 
       style="background:#e26fa7; color:white; padding:12px 25px; border-radius:30px; text-decoration:none; margin:10px; display:inline-block; transition:0.3s;">
       ➕ Add Product
    </a>

    <!-- Manage Users -->
    <a href="{{ url_for('admin_users') }}" 
       style="background:#c67ace; color:white; padding:12px 25px; border-radius:25px; text-decoration:none; margin:10px; display:inline-block;">
       👥 Manage Users
    </a>

    <!-- Manage Products -->
    <a href="{{ url_for('add_product') }}" 
       style="background:#ffb6c1; color:white; padding:12px 25px; border-radius:30px; text-decoration:none; margin:10px; display:inline-block; transition:0.3s;">
       🛍️ Manage Products
    </a>

    <!-- Dashboard -->
    <a href="{{ url_for('admin_dashboard') }}" 
       style="background:#ffb6c1; color:white; padding:12px 25px; border-radius:30px; text-decoration:none; margin:10px; display:inline-block; transition:0.3s;">
       📊 View Dashboard
    </a>

    <!-- Logout -->
    <a href="{{ url_for('logout') }}" 
       style="background:#f28b82; color:white; padding:12px 25px; border-radius:30px; text-decoration:none; margin:10px; display:inline-block; transition:0.3s;">
       🚪 Logout
    </a>
  </div>

  <!-- Recent Orders -->
  <h2 style="color:#e26fa7; text-align:center; margin-bottom:20px;">🧾 Recent Orders</h2>
  <div style="overflow-x:auto;">
    <table style="width:100%; border-collapse:collapse; background:white; border-radius:15px; overflow:hidden;">
      <thead style="background:#ffe3ec; color:#e26fa7;">
        <tr>
          <th style="padding:12px;">ID</th>
          <th>Customer</th>
          <th>Total</th>
          <th>Date</th>
        </tr>
      </thead>
      <tbody>
        {% for order in orders %}
        <tr style="text-align:center; border-bottom:1px solid #f8d7e3;">
          <td style="padding:10px;">{{ order.id }}</td>
          <td>{{ order.customer_name }}</td>
          <td>{{ order.total }} TUB</td>
          <td>{{ order.date_created.strftime('%Y-%m-%d') if order.date_created else '—' }}</td>
        </tr>
        {% else %}
        <tr><td colspan="4" style="text-align:center; padding:20px;">No orders yet 💌</td></tr>
        {% endfor %}
      </tbody>
    </table>
  </div>
</div>
{% endblock %}
