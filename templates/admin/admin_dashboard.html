{% extends "base.html" %}
{% block title %}Admin Dashboard | Crochet Rory Store{% endblock %}

{% block content %}
<div style="max-width:1000px; margin:40px auto; background:#fff0f6; padding:30px; border-radius:20px; box-shadow:0 4px 10px rgba(0,0,0,0.1);">
  
  <h1 style="text-align:center; color:#e26fa7; margin-bottom:20px;">🧶 Admin Dashboard 🧶</h1>
  <p style="text-align:center; color:#555;">Welcome, Admin! Manage your store easily 💕</p>

  <div style="text-align:center; margin-top:30px;">

    <a href="{{ url_for('admin_home') }}"  
       style="background:#ffb6c1; color:white; padding:12px 25px; border-radius:25px; text-decoration:none; margin:10px; display:inline-block;">
       🏠 Back to Home
    </a>


    <a href="{{ url_for('admin_products') }}" 
       style="background:#e26fa7; color:white; padding:12px 25px; border-radius:25px; text-decoration:none; margin:10px; display:inline-block;">
       🛍️ Manage Products
    </a>

    <a href="{{ url_for('add_product') }}" 
       style="background:#ffb6c1; color:white; padding:12px 25px; border-radius:25px; text-decoration:none; margin:10px; display:inline-block;">
       ➕ Add Product
    </a>

    <a href="{{ url_for('logout') }}" 
       style="background:#f28b82; color:white; padding:12px 25px; border-radius:25px; text-decoration:none; margin:10px; display:inline-block;">
       🚪 Logout
    </a>
  </div>

  <hr style="margin:40px 0; border:1px solid #ffd6e0;">

  <h2 style="color:#e26fa7; margin-bottom:15px;">📦 Recent Products</h2>
  <div style="display:flex; flex-wrap:wrap; gap:20px;">
    {% for product in products %}
    <div style="background:white; border-radius:15px; width:200px; text-align:center; padding:10px; box-shadow:0 2px 5px rgba(0,0,0,0.1);">
      <img src="{{ url_for('static', filename='images/' ~ product.image) }}" 
           alt="{{ product.name }}" 
           style="width:100%; height:150px; object-fit:cover; border-radius:10px;">
      <h4 style="color:#e26fa7; margin:10px 0;">{{ product.name }}</h4>
      <p>{{ product.price }} TUB</p>
      <div>
        <a href="{{ url_for('edit_product', id=product.id) }}" 
           style="color:#4caf50; text-decoration:none;">✏️ Edit</a> |
        <form method="POST" action="{{ url_for('delete_product', id=product.id) }}" style="display:inline;">
          <button type="submit" 
                  style="border:none; background:none; color:#f44336; cursor:pointer;">🗑️ Delete</button>
        </form>
      </div>
    </div>
    {% else %}
    <p>No products added yet.</p>
    {% endfor %}
  </div>

  <hr style="margin:40px 0; border:1px solid #ffd6e0;">

  <h2 style="color:#e26fa7; margin-bottom:15px;">🧾 Recent Orders</h2>
  <table style="width:100%; border-collapse:collapse;">
    <thead>
      <tr style="background:#ffe3ec; color:#e26fa7;">
        <th style="padding:10px;">Order ID</th>
        <th style="padding:10px;">Customer</th>
        <th style="padding:10px;">Address</th>
        <th style="padding:10px;">Total (TUB)</th>
      </tr>
    </thead>
    <tbody>
      {% for order in orders %}
      <tr style="text-align:center; background:white;">
        <td style="padding:10px;">{{ order.id }}</td>
        <td style="padding:10px;">{{ order.customer_name }}</td>
        <td style="padding:10px;">{{ order.address }}</td>
        <td style="padding:10px;">{{ order.total }}</td>
      </tr>
      {% else %}
      <tr>
        <td colspan="4" style="text-align:center; padding:15px;">No orders yet.</td>
      </tr>
      {% endfor %}
    </tbody>
  </table>

</div>
{% endblock %}
