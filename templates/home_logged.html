{% extends "base.html" %}
{% block title %}Welcome | Crochet Rory Store{% endblock %}
{% block content %}

<!-- ====== NAVBAR ====== -->
<nav style="background-color:white; width:80%; margin:20px auto; border-radius:25px; padding:10px; box-shadow:0 2px 6px rgba(0,0,0,0.1);">
  <ul style="list-style:none; display:flex; justify-content:center; align-items:center; gap:40px; margin:0; padding:0; font-weight:bold;">
    <li><a href="{{ url_for('home_logged') }}" style="text-decoration:none; color:#e26fa7;">Home</a></li>
    <li><a href="{{ url_for('products_page') }}" style="text-decoration:none; color:#333;">Products</a></li>
    <li><a href="{{ url_for('cart_page') }}" style="text-decoration:none; color:#333;">ğŸ›’ Cart</a></li>
    <li><a href="{{ url_for('contact_page') }}" style="text-decoration:none; color:#333; font-weight:bold;">Contact</a></li>
    <li><a href="{{ url_for('logout') }}" style="text-decoration:none; color:#333;">Logout</a></li>
  </ul>
</nav>

<!-- ====== WELCOME SECTION ====== -->
<section style="text-align:center; padding:60px 20px; background-color:#fff0f6; border-radius:20px; width:90%; margin:auto;">
  <h1 style="color:#e26fa7;">Welcome back, {{ user }} ğŸ’•</h1>
  <p style="color:#555; font-size:1.2rem;">Explore your favorite crochet collections!</p>

  <div style="margin-top:30px;">
    <a href="{{ url_for('products_page') }}" 
       style="background-color:#e26fa7; color:white; border:none; padding:12px 30px; border-radius:25px; font-size:1.1rem; text-decoration:none;">
       ğŸ§¶ Find Your Favorite Product
    </a>
  </div>
</section>

<!-- ====== HERO SECTION ====== -->
<section id="home" class="hero" style="position:relative; text-align:center; margin-top:60px;">
  <img src="{{ url_for('static', filename='images/cattt.jpg') }}" alt="image" class="hero_image" style="width:90%; border-radius:20px; max-height:500px; object-fit:cover;">
  <div class="hero-content" style="position:absolute; top:50%; left:50%; transform:translate(-50%, -50%); color:#e26fa7;">
    <h1 style="font-size:70px; padding:10px 20px; border-radius:15px;">
      Welcome back to Crochet Rory ğŸ§¶
    </h1>
    <button onclick="window.location.href='{{ url_for('products_page') }}'" 
            style="margin-top:20px; background-color:#e26fa7; color:white; border:none; padding:12px 30px; border-radius:25px; cursor:pointer;">
      Find your favorite product
    </button>
  </div>
</section>


<!-- ====== ABOUT ME ====== -->
<section id="about-me" style="background-color:#fff0f6; padding:50px 20px; text-align:center; margin-top:60px;">
  <h2 style="color:#e26fa7; font-size:2rem;">âœ¨ About Me âœ¨</h2>
  <div style="max-width:900px; margin:auto; display:flex; flex-wrap:wrap; align-items:center; justify-content:center; gap:30px;">
    <img src="{{ url_for('static', filename='images/tu.jpg') }}" alt="Crochet Art" style="width:260px; border-radius:20px; box-shadow:0 4px 10px rgba(0,0,0,0.1);">
    <p style="flex:1; min-width:300px; text-align:left; font-size:1.1rem; line-height:1.8; color:#444;">
      Welcome to <strong>Roryâ€™s world</strong>, where craftsmanship meets creativity!  
      Each creation reflects love, patience, and attention to every detail ğŸ§¶ğŸ’—  
      Thank you for being part of this cozy handmade journey âœ¨
    </p>
  </div>
</section>


<!-- ====== REVIEWS SECTION ====== -->
<section id="reviews" style="background-color:#ffcbe1; padding:60px 20px; text-align:center;">
  <h2 style="color:#e26fa7; font-size:2rem; margin-bottom:30px;">ğŸ’¬ Customer Reviews ğŸ’¬</h2>

  <!-- ğŸ“ Ù†Ù…ÙˆØ°Ø¬ ÙƒØªØ§Ø¨Ø© Ù…Ø±Ø§Ø¬Ø¹Ø© -->
  <div style="max-width:600px; margin:0 auto 40px; background:white; border-radius:15px; padding:20px; box-shadow:0 4px 10px rgba(0,0,0,0.1);">
    {% with messages = get_flashed_messages(with_categories=true) %}
      {% if messages %}
        {% for category, message in messages %}
          <div style="background-color:#e26fa7; color:white; padding:10px; border-radius:10px; margin-bottom:10px;">
            {{ message }}
          </div>
        {% endfor %}
      {% endif %}
    {% endwith %}

    <form method="POST" action="{{ url_for('home_logged') }}">
      <input type="text" name="name" placeholder="Your Name" required 
             style="padding:10px; width:80%; border-radius:10px; border:1px solid #ccc; margin-bottom:15px;"><br>

      <textarea name="message" placeholder="Write your review here..." required
                style="padding:10px; width:80%; height:100px; border-radius:10px; border:1px solid #ccc; margin-bottom:15px;"></textarea><br>

      <label style="color:#e26fa7; font-weight:bold;">Your Rating:</label><br>
      <select name="stars" required 
              style="padding:10px; border-radius:10px; border:1px solid #ccc; margin:10px 0;">
        <option value="5">â˜…â˜…â˜…â˜…â˜… - Excellent</option>
        <option value="4">â˜…â˜…â˜…â˜…â˜† - Good</option>
        <option value="3">â˜…â˜…â˜…â˜†â˜† - Average</option>
        <option value="2">â˜…â˜…â˜†â˜†â˜† - Poor</option>
        <option value="1">â˜…â˜†â˜†â˜†â˜† - Bad</option>
      </select><br>

      <button type="submit" 
              style="background-color:#e26fa7; color:white; border:none; padding:10px 20px; border-radius:20px; cursor:pointer;">
        Submit Review
      </button>
    </form>
  </div>

  <!-- ğŸ’¬ Ø¹Ø±Ø¶ Ø§Ù„Ù…Ø±Ø§Ø¬Ø¹Ø§Øª -->
  <div style="max-width:800px; margin:auto; display:flex; flex-direction:column; gap:20px;">
    {% for review in reviews %}
      <div style="background:white; border-radius:15px; padding:20px; box-shadow:0 4px 10px rgba(0,0,0,0.1); text-align:left;">
        <p style="color:#fbc02d; font-size:1.2rem;">
          {% for i in range(review.stars) %}â˜…{% endfor %}
          {% for i in range(5 - review.stars) %}â˜†{% endfor %}
        </p>
        <p style="margin-bottom:5px;">{{ review.message }}</p>
        <strong style="color:#e26fa7;">- {{ review.name }}</strong>

        {% if review.admin_reply %}
          <div class="admin-reply" 
               style="background:#fff5fa; padding:12px; border-radius:10px; margin-top:10px; border-left:4px solid #e26fa7;">
            <strong style="color:#e26fa7;">ğŸ’Œ Admin reply:</strong>
            <p style="margin:5px 0 0;">{{ review.admin_reply }}</p>
          </div>
        {% endif %}
      </div>
    {% else %}
      <p style="color:#555;">No reviews yet. Be the first to share your experience! ğŸ’•</p>
    {% endfor %}
  </div>
</section>
``





<script>
  async function addToCart(id) {
    const res = await fetch("/api/cart/add", {
      method: "POST",
      headers: { "Content-Type": "application/json" },
      body: JSON.stringify({ product_id: id })
    });
    const data = await res.json();
    if (data.success) {
      alert("âœ… Added to cart!");
    } else {
      alert("âŒ " + data.error);
    }
  }
</script>

{% endblock %}
